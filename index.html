<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        .input input {
            /* display: block; */
            width: 300px;
            height: 30px;
            border: 0;
            border: 1px solid #ccc;
            padding-left: 20px;
            margin-top: 10px;
        }
        button {
            width: 50px;
            height: 30px;
            margin: 20px;
            margin-left: 0px;
        }
        .table tr th {
            width: 100px;
        }
        .table td {
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="wrap">
        <div class="input">
            <span>材料：</span>
            <input type="text" class="materials" placeholder="请输入材料"/>
        </div>
        <div class="input">
            <span>重量（克）：</span>
            <input type="text" class="weight" placeholder="请输入重量"/>
        </div>
        <div class="input">
            <span>价格（斤）：</span>
            <input type="text" class="price" placeholder="请输入价格"/>
        </div>
        <button onclick="add()">添加</button>
        <div class="list">
            <table class="table" border="1">
                <tr>
                    <th>材料</th>
                    <th>重量（克）</th>
                    <th>单价（斤）</th>
                    <th>合计</th>
                    <th>操作</th>
                </tr>
            </table>
            <div style="margin-top: 20px;">总计： <span class="total">0</span>元</div>
        </div>
    </div>
</body>
<script>
    // let arr = ['八角','山楂','桂皮','香果','千里香','甘草','香叶','陈皮','良姜','枝子','小茴香','白扣',
    // '肉扣','红豆扣','山奈','香沙','冰朗片','白脂','草果','贝克','草扣','桂枝','丁香','金银花','毕拔']
    // let arr2 = [80,20,80,15,50,20,15,20,80,20,50,20,40,20,10,30,15,80,30,20,30,20,15,20,15]
    // let arr3 = [25,10,13,22,10,14,11,8,8,13,7,45,36,32,22,15,12,10,38,11,13,8,32,85,22]
    
    // let num = 0
    // arr2.map((curr, index) => {
    //     num += curr / 500 * arr3[index]
    // })

    let m = document.getElementsByClassName('materials')[0]
    let w = document.getElementsByClassName('weight')[0]
    let p = document.getElementsByClassName('price')[0]

    let materials, weight, price

    function add() {
        materials = m.value
        weight = w.value
        price = p.value
        let table = document.getElementsByClassName('table')[0]
        console.log(table)
        table.innerHTML += `
            <tr>
                <td>${materials}</td>
                <td>${weight}</td>
                <td>${price}</td>
                <td class="count">${count(weight, price)}</td>
                <td><a href="javascript: void(0);" onclick="deleteEle(this)">删除</a></td>
            </tr>`

        calc()
    }

    function count(w, p) {
        return w / 500 * price
    }

    function deleteEle(e) {
        console.log(e)
        e.parentNode.parentNode.parentNode.removeChild(e.parentNode.parentNode)
        calc()
    }

    function calc() {
        let total = 0
        let countEle = document.getElementsByClassName('count')
        let length = countEle.length
        for(let i = 0; i < length; i++) {
            total += Number(countEle[i].innerText)
        }
        
        let totalEle = document.getElementsByClassName('total')[0]
        totalEle.innerText = total
    }
</script>
</html>